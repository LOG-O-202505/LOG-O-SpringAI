<!-- src/main/resources/templates/mypage.mustache -->
{{> layout/default}}
<div class="row">
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Profile</h5>
            </div>
            <div class="card-body">
                <div class="text-center mb-3">
                    <img id="profile-image" src="" alt="Profile" class="rounded-circle img-thumbnail" style="width: 150px; height: 150px;">
                </div>
                <h4 id="user-name" class="text-center"></h4>
                <p id="user-nickname" class="text-center text-muted"></p>
                <hr>
                <div id="user-details">
                    <p><strong>ID:</strong> <span id="user-id"></span></p>
                    <p><strong>Birthday:</strong> <span id="user-birthday"></span></p>
                    <p><strong>Address:</strong> <span id="user-address"></span></p>
                    <p><strong>Phone:</strong> <span id="user-phone"></span></p>
                </div>
                <button class="btn btn-primary btn-block mt-3" id="edit-profile-btn">Edit Profile</button>
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="travels-tab" data-toggle="tab" href="#travels" role="tab" aria-controls="travels" aria-selected="true">My Travels</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="images-tab" data-toggle="tab" href="#images" role="tab" aria-controls="images" aria-selected="false">My Images</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="liked-tab" data-toggle="tab" href="#liked" role="tab" aria-controls="liked" aria-selected="false">Liked Places</a>
            </li>
        </ul>

        <div class="tab-content p-3 border border-top-0 rounded-bottom" id="myTabContent">
            <!-- My Travels Tab -->
            <div class="tab-pane fade show active" id="travels" role="tabpanel" aria-labelledby="travels-tab">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="mb-0">My Travel Plans</h4>
                    <button class="btn btn-success" id="new-travel-btn">New Travel</button>
                </div>
                <div id="travel-list" class="list-group">
                    <!-- Travel items will be added here -->
                    <div class="text-center p-5" id="travels-loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <div class="text-center p-5 d-none" id="travels-empty">
                        <p class="text-muted">You haven't created any travel plans yet.</p>
                    </div>
                </div>
            </div>

            <!-- My Images Tab -->
            <div class="tab-pane fade" id="images" role="tabpanel" aria-labelledby="images-tab">
                <h4 class="mb-3">My Travel Images</h4>
                <div class="row" id="image-gallery">
                    <!-- Image items will be added here -->
                    <div class="col-12 text-center p-5" id="images-loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <div class="col-12 text-center p-5 d-none" id="images-empty">
                        <p class="text-muted">You haven't uploaded any travel images yet.</p>
                    </div>
                </div>
            </div>

            <!-- Liked Places Tab -->
            <div class="tab-pane fade" id="liked" role="tabpanel" aria-labelledby="liked-tab">
                <h4 class="mb-3">Places I Like</h4>
                <div id="liked-places" class="list-group">
                    <!-- Liked places will be added here -->
                    <div class="text-center p-5" id="liked-loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <div class="text-center p-5 d-none" id="liked-empty">
                        <p class="text-muted">You haven't liked any places yet.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="edit-profile-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="edit-nickname">Nickname</label>
                        <input type="text" class="form-control" id="edit-nickname" name="nickname" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">Address</label>
                        <input type="text" class="form-control" id="edit-address" name="address" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-phone">Phone</label>
                        <input type="tel" class="form-control" id="edit-phone" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-profileImage">Profile Image URL</label>
                        <input type="url" class="form-control" id="edit-profileImage" name="profileImage">
                    </div>
                    <div class="form-group">
                        <label for="edit-password">New Password (Leave blank to keep current)</label>
                        <input type="password" class="form-control" id="edit-password" name="password">
                    </div>
                    <div class="alert alert-danger d-none" id="edit-error"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="/js/main.js"></script>